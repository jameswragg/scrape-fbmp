<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>FBMP Listings</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body>
    <div class="container mx-auto p-5">
      <div class="rounded mb-5 bg-gray-300 p-3 space-y-3">
        <div class="flex">
          <h1 class="text-xl">
            <a href="https://jameswragg.github.io/scrape-fbmp/"
              >Facebook Marketplace alerts</a
            >
          </h1>
          <p class="text-xl ml-2">
            (<a href="https://github.com/jameswragg/scrape-fbmp">github</a>)
          </p>
        </div>
        <p>
          <a
            class="text-blue-800"
            href="https://www.facebook.com/marketplace/108695472488778/search?query=%22marble%20fireplace%22%20OR%20%22cast%20iron%20fireplace%22%20OR%20%22victorian%20fireplace%22&radius=25&sortBy=creation_time_descend&exact=false"
            >Facebook Marketplace search</a
          >
        </p>
      </div>
      <div id="output" class="relative p-3"></div>
    </div>

    <script type="module">
      const res = await fetch("results.json");
      const data = await res.json();

      const html = `<ul class="divide-y divide-gray-100">
          ${data
            .map(
              (i) => `
          <li class="ex justify-between gap-x-6 py-5">
            <div class="flex min-w-0 gap-x-4">
                <div class="flex-1 mr-3">
                    <p class="flex-1 text-sm font-semibold leading-6 text-gray-900">${i.description}</p>
                    <p class="text-gray-400">${i.location}</p>
                </div>
              <p class="">${i.price}</p>
            </div>
          </li>`
            )
            .join("")}
      </ul>`;

      document.querySelector("#output").innerHTML = html;
    </script>
  </body>
</html>
